@model HRProject.Models.UserCompetenceProfileViewModel

@{
    ViewData["Title"] = "User Profile";
}

<style>
    /* HERO IMAGE ONLY */
    .profile-hero {
        background: linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.45)), url('/images/2.jpg');
        background-size: cover;
        background-position: center;
        height: 260px;
        border-radius: 18px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.20);
        margin-bottom: 30px;
    }

    /* CARD */
    .profile-card {
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    .badge-level {
        font-size: 0.82rem;
        padding: 0.35rem 0.7rem;
        border-radius: 999px;
    }

    .badge-basic {
        background-color: #e1f0ff;
        color: #0d6efd;
    }

    .badge-intermediate {
        background-color: #fff3cd;
        color: #856404;
    }

    .badge-advanced {
        background-color: #e2f7e6;
        color: #0f5132;
    }
</style>

<div class="container mt-4 mb-5">

    <!-- HERO BACKGROUND IMAGE ONLY -->
    <div class="profile-hero"></div>

    <!-- USER BASIC INFO CARD -->
    <div class="card profile-card mb-4">
        <div class="card-body">
            <h3 class="fw-bold">@Model.FullName</h3>

            @if (!string.IsNullOrWhiteSpace(Model.JobTitle))
            {
                <p class="text-muted mb-2">@Model.JobTitle</p>
            }

            <p class="mb-1"><strong>Email:</strong> @Model.UserEmail</p>
        </div>
    </div>

    <!-- COMPETENCE TABLE -->
    <div class="card profile-card">
        <div class="card-header bg-white">
            <h5 class="mb-0">Competence Profile</h5>
        </div>

        <div class="card-body">

            @if (Model.Competences == null || !Model.Competences.Any())
            {
                <div class="alert alert-info">
                    This user has no competences assigned yet.
                </div>
            }
            else
            {
                <div class="table-responsive">
                    <table class="table align-middle">
                        <thead class="table-light">
                            <tr>
                                <th>Competence</th>
                                <th style="width: 180px;">Level</th>
                                <th style="width: 180px;">Years of Experience</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var uc in Model.Competences)
                            {
                                string levelClass = uc.Level switch
                                {
                                    HRProject.Models.CompetenceLevel.Basic => "badge-basic",
                                    HRProject.Models.CompetenceLevel.Intermediate => "badge-intermediate",
                                    HRProject.Models.CompetenceLevel.Advanced => "badge-advanced",
                                    _ => "badge-basic"
                                };

                                <tr>
                                    <td><strong>@uc.Competence?.Name</strong></td>
                                    <td>
                                        <span class="badge badge-level @levelClass">
                                            @uc.Level.ToString()
                                        </span>
                                    </td>
                                    <td>
                                        @(uc.YearsOfExperience?.ToString() ?? "-")
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            }
        </div>
    </div>

</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
