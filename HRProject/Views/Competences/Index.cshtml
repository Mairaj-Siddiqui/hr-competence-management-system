@model IEnumerable<HRProject.Models.Competence>

@{
    ViewData["Title"] = "Competences";
    var totalCompetences = Model?.Count() ?? 0;
}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<style>
    .comp-header-bg {
        background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%);
        height: 180px;
        border-radius: 0 0 40px 40px;
        position: relative;
        margin-bottom: 3rem;
        box-shadow: 0 10px 25px rgba(0,0,0,0.20);
    }

    .comp-header-content {
        position: absolute;
        bottom: 30px;
        width: 100%;
        text-align: center;
        color: #fff;
    }

        .comp-header-content h2 {
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.6);
        }

    .stat-card {
        border-radius: 14px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        border: none;
    }

    .stat-icon {
        font-size: 2rem;
        opacity: 0.9;
    }

    .table-wrapper {
        border-radius: 14px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        overflow: hidden;
        background-color: #fff;
    }

    .table thead th {
        background-color: #f8f9fa;
        border-bottom: 1px solid #e9ecef;
        font-size: 0.85rem;
        text-transform: uppercase;
        letter-spacing: .05em;
        color: #6c757d;
    }

    .table-hover tbody tr:hover {
        background-color: #f9fbff;
    }
</style>

<!-- HEADER -->
<div class="comp-header-bg">
    <div class="comp-header-content">
        <h2><i class="bi bi-collection me-2"></i>Competences</h2>
        <p class="mb-0 opacity-75">Library of skills that can be assigned to employees</p>
    </div>
</div>

<div class="container mb-5">

    <!-- STATS ROW -->
    <div class="row mb-4">
        <div class="col-md-6 mb-3">
            <div class="card stat-card h-100">
                <div class="card-body d-flex align-items-center">
                    <div class="me-3">
                        <div class="stat-icon text-primary">
                            <i class="bi bi-database"></i>
                        </div>
                    </div>
                    <div>
                        <div class="small text-muted text-uppercase fw-semibold">
                            Database
                        </div>
                        <div class="fs-6">
                            @((ViewBag.DatabaseName ?? "HRProject").ToString())
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-6 mb-3">
            <div class="card stat-card h-100">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <div class="small text-muted text-uppercase fw-semibold">
                            Total competences
                        </div>
                        <div class="fs-4 fw-bold">@totalCompetences</div>
                    </div>
                    <a asp-action="Create" class="btn btn-primary btn-sm px-4">
                        <i class="bi bi-plus-circle me-1"></i> Add New Competence
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- TABLE -->
    <div class="table-wrapper">
        <table class="table table-hover mb-0 align-middle">
            <thead>
                <tr>
                    <th style="width:60px;">Id</th>
                    <th style="width:220px;">Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                @if (Model != null && Model.Any())
                {
                    foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.Id</td>
                            <td class="fw-semibold">@item.Name</td>
                            <td>@item.Description</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="3" class="text-center text-muted py-4">
                            <i class="bi bi-clipboard-x me-1"></i>
                            No competences have been created yet.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
